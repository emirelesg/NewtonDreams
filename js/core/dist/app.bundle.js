!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"MOVE_STYLE",(function(){return s})),i.d(n,"SHAPE_STYLE",(function(){return a})),i.d(n,"ANGLE_STYLE",(function(){return l})),i.d(n,"SYMBOL",(function(){return h})),i.d(n,"CURSOR",(function(){return u})),i.d(n,"RAD_TO_DEG",(function(){return c})),i.d(n,"DEG_TO_RAD",(function(){return f})),i.d(n,"M_TO_CM",(function(){return d})),i.d(n,"CM_TO_M",(function(){return p})),i.d(n,"CM3_TO_M3",(function(){return y})),i.d(n,"PA_TO_ATM",(function(){return b})),i.d(n,"PI",(function(){return v})),i.d(n,"TWO_PI",(function(){return g})),i.d(n,"HALF_PI",(function(){return m})),i.d(n,"THIRD_PI",(function(){return x})),i.d(n,"FOURTH_PI",(function(){return w})),i.d(n,"FIFTH_PI",(function(){return k})),i.d(n,"SIXTH_PI",(function(){return P})),i.d(n,"LOG10",(function(){return O})),i.d(n,"SIN60",(function(){return S})),i.d(n,"COS60",(function(){return C})),i.d(n,"SIN30",(function(){return E})),i.d(n,"COS30",(function(){return T})),i.d(n,"GRAVITY",(function(){return j})),i.d(n,"K",(function(){return M})),i.d(n,"E0",(function(){return _})),i.d(n,"BOLTZMANN",(function(){return R})),i.d(n,"AVOGADRO",(function(){return A})),i.d(n,"OVER_NOTHING",(function(){return D})),i.d(n,"DRAG_NOTHING",(function(){return N})),i.d(n,"FONT",(function(){return L})),i.d(n,"FONT_SIZE",(function(){return I})),i.d(n,"FONT_COLOR",(function(){return z})),i.d(n,"FONT_BASELINE",(function(){return B})),i.d(n,"FONT_ALIGN",(function(){return F})),i.d(n,"COLORS",(function(){return Y})),i.d(n,"BOX_COLORS",(function(){return G}));var o={};i.r(o),i.d(o,"getPixelRatio",(function(){return X})),i.d(o,"fixId",(function(){return W})),i.d(o,"round",(function(){return K})),i.d(o,"clamp",(function(){return H})),i.d(o,"cos",(function(){return q})),i.d(o,"sin",(function(){return V})),i.d(o,"isFunction",(function(){return Z})),i.d(o,"isObject",(function(){return J})),i.d(o,"isString",(function(){return Q})),i.d(o,"distSquared",(function(){return tt})),i.d(o,"rad",(function(){return et})),i.d(o,"isCoordInside",(function(){return it})),i.d(o,"formatValue",(function(){return nt})),i.d(o,"loadOptions",(function(){return ot})),i.d(o,"calcStepSize",(function(){return rt})),i.d(o,"gaussian",(function(){return st})),i.d(o,"rgbToRgba",(function(){return at}));var r={};i.r(r),i.d(r,"default",(function(){return Nt})),i.d(r,"Option",(function(){return Lt})),i.d(r,"Button",(function(){return It})),i.d(r,"Input",(function(){return zt})),i.d(r,"Select",(function(){return Bt})),i.d(r,"Options",(function(){return Ft}));var s={BY_PX:"px",BY_UNITS:"units"},a={NONE:0,ACCOMULATIVE:1},l={DEG:1,RAD:2},h={BLANK:"-",THETA:"θ",INF:"∞",MICRO:"μ",OHM:"Ω",LETTERS:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},u={DEFAULT:"default",POINTER:"pointer",CROSS:"crosshair",MOVE:"move",TEXT:"text"},c=180/Math.PI,f=Math.PI/180,d=100,p=.01,y=1/Math.pow(100,3),b=986923e-11,v=Math.PI,g=2*v,m=v/2,x=v/3,w=v/4,k=v/5,P=v/6,O=Math.log(10),S=Math.sin(x),C=Math.cos(x),E=C,T=S,j=-9.81,M=8987e6,_=8854e-15,R=138064852e-31,A=60221409e16,D=-1,N=null,L="-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica Neue, Arial, Sans Serif",I="12",z="#444444",B=["top","hanging","middle","alphabetic","ideographic","bottom"],F=["left","right","center","start","end"],Y={RED:"#F44336",BLUE:"#007bff",GREEN:"#4CAF50",YELLOW:"#FFC510",PURPLE:"#673AB7",BROWN:"#795548",LIGHT_GREEN:"#CDDC39",GRAY:"#607D8B",LIGHT_GRAY:"#8FA4AD",WHITE:"#FFFFFF",BLACK:"#000000",COMPONENT:"#B7B7B7"},G={BLUE:{BACKGROUND:"#F0F5FF",BORDER:"#A2C1FF"},GREEN:{BACKGROUND:"#D5E8D4",BORDER:"#82B366"},RED:{BACKGROUND:"#F8CECC",BORDER:"#B85450"},YELLOW:{BACKGROUND:"#FFF2CC",BORDER:"#D6B656"},ORANGE:{BACKGROUND:"#FFE6CC",BORDER:"#D79B00"},PURPLE:{BACKGROUND:"#E1D5E7",BORDER:"#9673A6"},GRAY:{BACKGROUND:"#F5F5F5",BORDER:"#CCCCCC"}};function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}function W(t){return"#"===t[0]?t:"#".concat(t)}function K(t,e){var i=Math.pow(10,e||0);return Math.round(t*i)/i}function H(t,e,i){return t>i?i:t<e?e:t}function q(t,e){return Math.cos(e===l.DEG?t*f:t)}function V(t,e){return Math.sin(e===l.DEG?t*f:t)}function Z(t){return"function"==typeof t}function J(t){return"object"===U(t)}function Q(t){return"string"==typeof t}function tt(t,e,i,n){return Math.pow(i-t,2)+Math.pow(n-e,2)}function et(t,e){return e===l.DEG?t*f:t}function it(t,e,i,n,o,r){return Math.pow(i-t,2)<Math.pow(o,2)&&Math.pow(e-n,2)<Math.pow(r,2)}function nt(t,e,i,n){if(t===h.BLANK||t===h.INF)return t;var o=Number.isNaN(t)&&void 0!==t?0:K(t,i);return n&&(o=o.toFixed(i)),"°"===e||"º"===e?"".concat(o,"°"):"".concat(o," ").concat(e)}function ot(t,e){if(e)for(var i=Object.keys(e),n=0;n<i.length;n+=1)Object.prototype.hasOwnProperty.call(t,i[n])&&(t[i[n]]=e[i[n]])}function rt(t,e){var i=t/e,n=Math.floor(Math.log(i)/O),o=Math.pow(10,n),r=Math.round(i/o+.5);return r>5?r=10:r>2?r=5:r>1&&(r=2),r*o}function st(t){for(var e=0,i=0;i<t;i+=1)e+=Math.random();return e/t}function at(t,e){var i=e>1?1:e<0?0:e,n=parseInt(t.substr(1,2),16),o=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16);return"rgba(".concat(n,", ").concat(o,", ").concat(r,", ").concat(i,")")}function lt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ht=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.px=0,this.mag=0,this.unit="",this.toPx=0,this.toUnits=0,this.set(e,i,n)}var e,i,n;return e=t,(i=[{key:"set",value:function(t,e,i){this.px=t,this.mag=e,this.unit=Q(i)?i:"",this.toPx=this.px/this.mag,this.toUnits=this.mag/this.px}}])&&lt(e.prototype,i),n&&lt(e,n),t}();function ut(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ct=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=I,this.face=L,this.color=z,this.baseline="middle",this.align="center",this.weight="normal",this.spacing=1,this.set(e)}var e,i,n;return e=t,n=[{key:"validateBaseline",value:function(t){if(B.includes(t))return!0;throw new Error("".concat(t," is not a valid baseline."))}},{key:"validateAlign",value:function(t){if(F.includes(t))return!0;throw new Error("".concat(t," is not a valid text align."))}}],(i=[{key:"set",value:function(e){e&&(e.size&&(this.size=e.size),e.face&&(this.face=e.face),e.color&&(this.color=e.color),e.baseline&&t.validateBaseline(e.baseline)&&(this.baseline=e.baseline),e.align&&t.validateAlign(e.align)&&(this.align=e.align),e.weight&&(this.weight=e.weight),e.spacing&&(this.spacing=e.spacing))}},{key:"toCtx",value:function(t){"normal"!==this.weight?t.font="".concat(this.weight," ").concat(this.size,"px ").concat(this.face):t.font="".concat(this.size,"px ").concat(this.face),t.textAlign=this.align,t.textBaseline=this.baseline,t.fillStyle=this.color}}])&&ut(e.prototype,i),n&&ut(e,n),t}();function ft(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAxis=!1,this.parent=void 0,this.rendered=!1,this.enabled=!0,this.world=void 0,this.absolute=!1,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.callback=void 0,this.callbackArgs=void 0,ot(this,e)}var e,i,n;return e=t,(i=[{key:"setWorld",value:function(t){this.world=t,this.resize()}},{key:"setCallback",value:function(t,e){this.resize(),this.render(),this.callback=t,this.callbackArgs=e}},{key:"render",value:function(){this.enabled=!0,this.rendered=!1}},{key:"resize",value:function(){var t=this.world,e=t.pxRatio,i=t.canvas;this.canvas.width=i.width,this.canvas.height=i.height,this.ctx.scale(e,e),this.rendered=!1}},{key:"begin",value:function(){var t=this.world,e=t.width,i=t.height;if(this.ctx.save(),this.ctx.clearRect(0,0,e,i),!this.absolute){var n=this.isAxis?this.parent:this.world.axis;this.ctx.translate(n.position.x,n.position.y)}}},{key:"end",value:function(){this.ctx.restore(),this.rendered=!0}},{key:"draw",value:function(){var t=this.world,e=t.width,i=t.height,n=t.ctx;if(this.absolute)n.drawImage(this.canvas,0,0,e,i);else{var o=this.isAxis?this.parent:this.world.axis;n.drawImage(this.canvas,-o.position.x,-o.position.y,e,i)}}}])&&ft(e.prototype,i),n&&ft(e,n),t}();function pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.world=null,this.display=!0,this.zIndex=0,this.savedZIndex=0,this.position={x:0,y:0},this.topmostOnDrag=!1,this.isDraggable=!1,this.dragging=!1,this.onMouseMove=void 0,this.mouseOver=!1,this.mouseMoveStyle=s.BY_UNITS,this.cursor=u.POINTER,this.color=Y.RED,this.scale=1,this.rotation=0,this.valid=!0,this.renderer=void 0,this.width=0,this.height=0,this.font=new ct}var e,i,n;return e=t,(i=[{key:"setWorld",value:function(t){this.world=t,this.resize()}},{key:"resize",value:function(){}},{key:"isMouseOver",value:function(){return!1}},{key:"setScale",value:function(t){this.scale=t>=0&&t<=1?t:0,this.renderer&&(this.renderer.rendered=!1)}},{key:"setColor",value:function(t){this.color=t,this.renderer&&(this.renderer.rendered=!1)}},{key:"draggable",value:function(t){this.isDraggable=t}},{key:"topmost",value:function(t){this.zIndex=t?1e3:this.savedZIndex}},{key:"setZ",value:function(t){this.zIndex=t,this.savedZIndex=t}},{key:"setPosition",value:function(t,e){this.position.x=K(t,3),this.position.y=K(e,3),this.renderer&&(this.renderer.rendered=!1)}},{key:"addPosition",value:function(t,e){this.position.x+=K(t,3),this.position.y+=K(e,3),this.renderer&&(this.renderer.rendered=!1)}}])&&pt(e.prototype,i),n&&pt(e,n),t}();function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t,i,n){var o,r,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,(o=!(a=gt(e).call(this))||"object"!==bt(a)&&"function"!=typeof a?mt(r):a).height=i||0,o.width=t||0,o.isDraggable=!0,o.color="#CCCCCC",o.subAxisColor="#EEEEEE",o.cursor=u.MOVE,o.mouseMoveStyle=s.BY_PX,o.min=[0,0],o.max=[0,0],o.displayX=!0,o.displayY=!0,o.tickSize=12,o.tickSizeSmall=8,o.textOffset=5,o.negative=!0,o.grid=!0,o.outsideNumbers=!0,o.renderer=new dt({enabled:!0,isAxis:!0,parent:mt(o)}),ot(mt(o),n),o}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(e,t),i=e,(n=[{key:"resize",value:function(){this.width=this.world.width,this.height=this.world.height}},{key:"isMouseOver",value:function(){return this.display}},{key:"drawAxis",value:function(){var t=this.world,e=t.scaleX,i=t.scaleY,n=this.renderer.enabled?this.renderer.ctx:this.world.ctx,o=this.width>0?this.width:this.world.width,r=this.height>0?this.height:this.world.height,s=this.negative?r-this.position.y:0,a=-this.position.y,l=this.negative?-this.position.x:0,h=o-this.position.x;this.min=[l,s],this.max=[h,a];var u=Math.ceil(l/e.px)*e.px,c=Math.floor(h/e.px)*e.px,f=Math.ceil(a/i.px)*i.px,d=Math.floor(s/i.px)*i.px,p=0,y=0;if(this.grid){for(n.beginPath(),n.strokeStyle=this.subAxisColor,y=f;y<=d;y+=i.px)0!==y&&(n.moveTo(l,y),n.lineTo(h,y));for(p=u;p<=c;p+=e.px)0!==p&&(n.moveTo(p,s),n.lineTo(p,a));n.stroke(),n.closePath()}if(n.beginPath(),n.strokeStyle=this.color,this.font.toCtx(n),this.position.x<o+this.tickSize&&this.position.x>-this.tickSize&&this.displayY){n.moveTo(0,s),n.lineTo(0,a);var b=this.outsideNumbers?-this.tickSize-this.textOffset:this.tickSize+this.textOffset;for(n.textAlign=this.outsideNumbers?"right":"left",y=f;y<=d;y+=i.px)0!==y&&(n.moveTo(-this.tickSize,y),n.lineTo(+this.tickSize,y),n.fillText(K(y*i.toUnits,3)+i.unit,b,y)),y-i.px/2>a&&(n.moveTo(-this.tickSizeSmall,y-i.px/2),n.lineTo(+this.tickSizeSmall,y-i.px/2));d+i.px/2<s&&(n.moveTo(-this.tickSizeSmall,d+i.px/2),n.lineTo(+this.tickSizeSmall,d+i.px/2))}if(this.position.y<r+this.tickSize&&this.position.y>-this.tickSize&&this.displayX){n.moveTo(l,0),n.lineTo(h,0);var v=this.outsideNumbers?7+this.tickSize+this.textOffset:-7-this.tickSize-this.textOffset;for(n.textAlign="center",p=u;p<=c;p+=e.px)0===p&&this.negative||(n.moveTo(p,-this.tickSize),n.lineTo(p,+this.tickSize)),(0===p&&!this.negative||0!==p)&&n.fillText(K(p*e.toUnits,3)+e.unit,p,v),p-e.px/2>l&&(n.moveTo(p-e.px/2,-this.tickSizeSmall),n.lineTo(p-e.px/2,+this.tickSizeSmall));c+e.px/2<h&&(n.moveTo(c+e.px/2,-this.tickSizeSmall),n.lineTo(c+e.px/2,+this.tickSizeSmall))}if(this.displayY&&!this.displayX){var g=this.outsideNumbers?-this.tickSize-this.textOffset:this.tickSize+this.textOffset;n.textAlign=this.outsideNumbers?"right":"left",n.fillText("0".concat(e.unit),g,0)}n.stroke(),n.closePath()}},{key:"draw",value:function(){this.renderer.enabled?this.renderer.rendered?this.renderer.draw():(this.renderer.begin(),this.drawAxis(),this.renderer.end(),this.renderer.draw()):this.drawAxis()}},{key:"isPointVisible",value:function(t,e){return this.min[0]<=t&&t<=this.max[0]&&this.min[1]>=e&&e>=this.max[1]}}])&&vt(i.prototype,n),o&&vt(i,o),e}(yt);function kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ot=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=$(W(e)),this.canvas=document.createElement("canvas",{alpha:!1}),this.ctx=this.canvas.getContext("2d"),this.pxRatio=X(this.ctx),this.scaleX=new ht(50,1),this.scaleY=new ht(50,-1),this.width=0,this.prevWidth=0,this.height=0,this.elements=[],this.axis=new wt,this.onDraw=Z(i)?i:null,this.onResize=Z(n)?n:null,this.onMouseMove=null,this.color=Y.WHITE,this.started=null,this.mouse={x:0,y:0,px:0,py:0,dx:0,dy:0,rx:0,ry:0,down:!1,inCanvas:!1,dragging:N,over:D,cursor:u.DEFAULT},this.background=new dt({absolute:!0,enabled:!1,world:this}),this.container.append(this.canvas),this.add(this.axis),this.bindEventListeners(),this.resize()}var e,i,n;return e=t,(i=[{key:"moveElements",value:function(){var t=this.mouse.dragging;t&&(this.mouse.inCanvas&&(t.mouseMoveStyle===s.BY_PX?t.addPosition(this.mouse.dx,this.mouse.dy):(t.addPosition(this.mouse.rdx,this.mouse.rdy),this.axis.negative||(t.position.x<0&&(t.position.x=0),t.position.y<0&&(t.position.y=0))),t.renderer&&(t.renderer.rendered=!1),Z(t.onMouseMove)&&t.onMouseMove(t)),t.dragging=this.mouse.down&&this.mouse.inCanvas,t.mouse_over=t.dragging,this.mouse.dragging=t.dragging?this.mouse.dragging:N,t.topmost(t.dragging&&t.topmostOnDrag))}},{key:"getMousePosition",value:function(t){var e,i=this.mouse,n=this.canvas.getBoundingClientRect();t&&!t.clientX?t.touches?e=kt(t.touches,1)[0]:t.changedTouches&&(e=kt(t.changedTouches,1)[0]):e=t,i.px=i.x,i.py=i.y,i.x=Math.floor(e.clientX-n.left),i.y=Math.floor(e.clientY-n.top),i.rx=(i.x-this.axis.position.x)*this.scaleX.toUnits,i.ry=(i.y-this.axis.position.y)*this.scaleY.toUnits,i.dx=i.x-i.px,i.dy=i.y-i.py,i.rdx=i.dx*this.scaleX.toUnits,i.rdy=i.dy*this.scaleY.toUnits}},{key:"isMouseOverElement",value:function(){if(this.mouse.dragging===N){for(var t=D,e=!1,i=this.elements.length-1;i>=0;i-=1)this.elements[i].elements&&this.elements[i].elements.filter((function(t){return t.onClick})).forEach((function(t){Z(t.isMouseOver)&&(t.mouseOver=t.isMouseOver(),e=e||t.mouseOver)})),this.elements[i].isMouseOver()&&this.elements[i].display&&this.elements[i].isDraggable&&t===D?(t=i,this.elements[i].mouseOver=!0):this.elements[i].mouseOver=!1;var n=u.DEFAULT;e&&(n=u.POINTER),t!==D&&(n=this.elements[t].cursor),this.setCursor(n),this.mouse.over=t}}},{key:"bindEventListeners",value:function(){var t=this,e=function(e){t.getMousePosition(e),t.isMouseOverElement(),t.moveElements(),Z(t.onMouseMove)&&t.onMouseMove()},i=function(e){e.preventDefault(),t.mouse.inCanvas=!0},n=function(e){e.preventDefault(),t.mouse.inCanvas=!1},o=function(e){e.preventDefault(),t.getMousePosition(e),t.isMouseOverElement(),t.mouse.down=!0,t.mouse.over!==D&&(t.mouse.dragging=t.elements[t.mouse.over])},r=function(e){e.preventDefault(),t.mouse.down=!1,t.moveElements()},s=function(e){t.getMousePosition(e),t.isMouseOverElement(),t.mouse.over!==D&&(e.cancelable&&e.preventDefault(),t.mouse.dragging=t.elements[t.mouse.over],t.mouse.down=!0,t.mouse.inCanvas=!0)},a=function(e){t.mouse.dragging!==N&&(e.cancelable&&e.preventDefault(),t.mouse.down=!1,t.mouse.inCanvas=!1,t.moveElements())},l=function(e){t.resize(e)};window.addEventListener("resize",l,!1),window.addEventListener("mouseup",r,!1),this.canvas.addEventListener("mousemove",e,!1),this.canvas.addEventListener("mouseenter",i,!1),this.canvas.addEventListener("mouseleave",n,!1),this.canvas.addEventListener("mousedown",o,!1),this.canvas.addEventListener("touchmove",e,!1),this.canvas.addEventListener("touchstart",s,!1),this.canvas.addEventListener("touchend",a,!1)}},{key:"resize",value:function(t){this.width=this.container.width();var e=Math.abs(this.prevWidth-this.width);this.prevWidth=this.width,this.height=this.container.height(),this.pxRatio=X(this.ctx),this.canvas.width=Math.floor(this.width*this.pxRatio),this.canvas.height=Math.floor(this.height*this.pxRatio),this.canvas.style.width="".concat(this.width,"px"),this.canvas.style.height="".concat(this.height,"px"),this.ctx.scale(this.pxRatio,this.pxRatio),this.background.enabled&&this.background.resize();for(var i=0;i<this.elements.length;i++)Z(this.elements[i].resize)&&this.elements[i].resize(),this.elements[i].renderer&&this.elements[i].renderer.resize();this.started&&Z(this.onResize)&&e>0&&this.onResize()}},{key:"setCursor",value:function(t){t!==this.mouse.cursor&&(this.canvas.style.cursor=t,this.mouse.cursor=t)}},{key:"draw",value:function(){this.onDraw(),this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.clearRect(0,0,this.width,this.height),this.background.enabled?this.background.rendered?this.background.draw():Z(this.background.callback)&&(this.background.begin(),this.background.callback(this.background.ctx,this.background.callbackArgs),this.background.end(),this.background.draw()):this.color!==Y.WHITE&&(this.ctx.fillStyle=this.color,this.ctx.rect(0,0,this.width,this.height),this.ctx.fill()),this.ctx.save(),this.ctx.translate(this.axis.position.x,this.axis.position.y),this.elements.sort((function(t,e){return t.zIndex-e.zIndex}));for(var t=0;t<this.elements.length;t++)Z(this.elements[t].draw)&&this.elements[t].display&&this.elements[t].draw();this.ctx.restore(),this.start()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0;n<e.length;n++)J(e[n])&&Object.prototype.hasOwnProperty.call(e[n],"valid")&&(e[n].setWorld(this),e[n].renderer&&e[n].renderer.setWorld(this),this.elements.push(e[n]))}},{key:"remove",value:function(){for(var t=0;t<arguments.length;t++){var e=this.elements.indexOf(t<0||arguments.length<=t?void 0:arguments[t]);e>-1&&(this.elements[e].world=void 0,this.elements.splice(e,1))}}},{key:"start",value:function(){var t=this;null===this.started&&Z(this.onResize)&&this.onResize(),this.started=requestAnimationFrame((function(){t.draw()}))}},{key:"export",value:function(){var t=window.location.pathname.split("/"),e=t[2],i=t[3];$.ajax({data:{data:this.canvas.toDataURL(),path:"/".concat(e,"/").concat(i,"/")},url:"../../php/export.php",dataType:"html",type:"post",success:function(t){console.log(t)}})}},{key:"fit",value:function(t,e,i,n,o){var r=Math.abs(t)+Math.abs(e),s=Math.abs(i)+Math.abs(n),a=rt(r*o,this.width/this.scaleX.px),l=rt(s*o,this.height/this.scaleY.px);this.scaleX.set(this.scaleX.px,Number.isNaN(a)?1:a,this.scaleX.unit),this.scaleY.set(this.scaleY.px,Number.isNaN(l)?-1:-l,this.scaleY.unit);var h=Math.floor(Math.abs(t)*this.scaleX.toPx+(this.width-r*this.scaleX.toPx)/2),u=Math.floor(Math.abs(i)*this.scaleY.toPx+(this.height-s*this.scaleY.toPx)/2);this.axis.setPosition(h,u)}}])&&Pt(e.prototype,i),n&&Pt(e,n),t}();function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Et(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?Tt(t):e}function Tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e,i){return e&&At(t.prototype,e),i&&At(t,i),t}var Nt=function(){function t(e){Rt(this,t),this.obj=$(W(e)),this.isEnabled=!this.obj.prop("disabled")}return Dt(t,[{key:"enabled",value:function(t){this.isEnabled!==t&&(this.isEnabled=t,this.obj.prop("disabled",!this.isEnabled))}}]),t}(),Lt=function(t){function e(t,i){var n;return Rt(this,e),(n=Et(this,jt(e).call(this,t))).onClick=i,n.value=n.obj.prop("checked"),n.obj.on("click",(function(){n.value=n.obj.prop("checked"),Z(n.onClick)&&n.onClick(n.obj.prop("checked"))})),n}return Mt(e,t),e}(Nt),It=function(t){function e(t,i){var n;return Rt(this,e),(n=Et(this,jt(e).call(this,t))).onClick=i,n.obj.on("click",(function(){Z(n.onClick)&&n.onClick()})),n}return Mt(e,t),e}(Nt),zt=function(t){function e(t,i,n){var o;return Rt(this,e),(o=Et(this,jt(e).call(this,t))).onChange=i,o.onFocusout=void 0,o.isNumber=!1,o.isInvalid=!1,o.value="",o.default="",ot(Tt(o),n),o.set(o.default),o.obj.on("input",(function(t){var e=o.obj.val();if(o.isNumber)if(""===e)o.value=o.default,o.invalid(!1);else{var i=parseFloat(e);o.invalid(isNaN(i)),isNaN(i)||(o.value=i)}else o.value=e;Z(o.onChange)&&o.onChange(o.value)})),o.obj.on("focusout",(function(){o.isNumber&&(o.set(o.value),Z(o.onChange)&&o.onChange(o.value),Z(o.onFocusout)&&o.onFocusout())})),o.obj.on("keyup",(function(t){13===t.keyCode&&o.obj.blur()})),o}return Mt(e,t),Dt(e,[{key:"set",value:function(t){this.value=t||this.default,this.obj.val(this.value),this.invalid(!1)}},{key:"invalid",value:function(t){this.isInvalid!==t&&(this.isInvalid=t,this.isInvalid?this.obj.addClass("invalid"):this.obj.removeClass("invalid"))}}]),e}(Nt),Bt=function(t){function e(t,i){var n;return Rt(this,e),(n=Et(this,jt(e).call(this,t))).onChange=i,n.value=0,n.obj.on("change",(function(){n.value=n.obj.find(":selected").val(),Z(n.onChange)&&n.onChange(n.value)})),n}return Mt(e,t),Dt(e,[{key:"setOptions",value:function(t,e){this.obj.empty();for(var i=0,n=Object.entries(t);i<n.length;i++){var o=Ct(n[i],2),r=o[0],s=o[1];this.obj.append($("<option></option>").attr("value",s).attr("selected",s===e).text(r))}this.obj.trigger("change")}}]),e}(Nt),Ft=function(){function t(e,i){var n=this;Rt(this,t),this.name='input[name="'.concat(e,'"]'),this.obj=$(this.name),this.value=$("".concat(this.name,":checked")).val(),this.onChange=i,this.obj.change((function(){n.value=$("".concat(n.name,":checked")).val(),Z(n.onChange)&&n.onChange(n.value)}))}return Dt(t,[{key:"select",value:function(t){this.value=t,this.obj.each((function(){$(this).val()===t?($(this).parent().addClass("active"),$(this).prop("checked",!0)):($(this).parent().removeClass("active"),$(this).prop("checked",!1))}))}},{key:"enabled",value:function(t){t?this.obj.parent().removeClass("disabled"):this.obj.parent().addClass("disabled")}}]),t}();function Yt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gt=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id="",this.color=Y.RED,this.prevColor=this.color,this.clone=void 0,this.units="",this.start=0,this.min=0,this.max=1,this.decPlaces=1,this.fixPlaces=!1,this.callback=void 0,this.callbackArgs=void 0,ot(this,e),this.value=this.start,this.slider=document.getElementById("".concat(this.id,"_slider")),this.label=$(W("".concat(this.id,"_label"))),this.setColor(),this.setLabel(this.start);var n=this;noUiSlider.create(this.slider,{start:this.start,connect:"lower",range:{min:this.min,max:this.max}}),this.slider.noUiSlider.on("slide",(function(t){n.value=K(t[0],n.decPlaces),n.setLabel(t[0]),Z(n.callback)&&n.callback(n.callbackArgs)}));var o="".concat(this.label.prop("id"),"_editable"),r=this.label.clone();r.prop("id",o).prop("readonly",!1).addClass("d-none"),this.label.after(r),this.clone=new zt(o,void 0,{isNumber:!0,onFocusout:function(){i.set(i.clone.value),i.clone.obj.addClass("d-none"),i.label.removeClass("d-none")}}),this.label.on("click",(function(){i.clone.set(i.value),i.clone.obj.removeClass("d-none"),i.clone.obj.select(),i.label.addClass("d-none")}))}var e,i,n;return e=t,(i=[{key:"setLabel",value:function(t){this.label.val(nt(t,this.units,this.decPlaces,this.fixPlaces))}},{key:"set",value:function(t){var e=H(t,this.min,this.max);this.slider.noUiSlider.set(e),this.setLabel(e),this.value=K(e,this.decPlaces),Z(this.callback)&&this.callback(this.callbackArgs)}},{key:"get",value:function(){return this.value}},{key:"enabled",value:function(t){this.slider.setAttribute("disabled",t),t?this.setColor(this.prevColor):(this.prevColor=this.color,this.setColor(Y.GRAY))}},{key:"setColor",value:function(t){void 0!==t&&(this.color=t),$("#".concat(this.id,"_slider")).css("background",this.color)}}])&&Yt(e.prototype,i),n&&Yt(e,n),t}();function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Wt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ht(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(t){function e(t){var i,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(i=!(o=Kt(e).call(this))||"object"!==Ut(o)&&"function"!=typeof o?Ht(n):o).x=0,i.y=0,i.components=!1,i.componentColor=Y.COMPONENT,i.componentsAtOrigin=!0,i.label="",i.angleStyle=l.DEG,ot(Ht(i),t),i}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(e,t),i=e,(n=[{key:"isMouseOver",value:function(){return tt(this.world.mouse.rx,this.world.mouse.ry,this.position.x,this.position.y)<1}},{key:"drawLine",value:function(t,e,i,n,o,r){var s=this.world.ctx,a=i-t,l=n-e,h=Math.sqrt(Math.pow(a,2)+Math.pow(l,2)),u=Math.atan2(l,a),c=k,f=h>10?10:h;return s.strokeStyle=o,s.fillStyle=o,s.beginPath(),r&&s.setLineDash([7,7]),s.moveTo(t,e),s.lineTo(i,n),s.stroke(),s.closePath(),s.beginPath(),s.moveTo(i,n),r&&s.setLineDash([]),s.lineTo(i-Math.floor(f*Math.cos(u-c)),n-Math.floor(f*Math.sin(u-c))),s.lineTo(i-Math.floor(f*Math.cos(u+c)),n-Math.floor(f*Math.sin(u+c))),s.lineTo(i,n),s.fill(),s.stroke(),s.closePath(),[h,u]}},{key:"draw",value:function(){if(0!==this.x||0!==this.y){var t=this.world,e=t.scaleX,i=t.scaleY,n=t.ctx,o=Math.floor(this.position.x*e.toPx),r=Math.floor(o+this.x*e.toPx*this.scale),s=Math.floor(this.position.y*i.toPx),a=Math.floor(s+this.y*i.toPx*this.scale),l=n.lineWidth;n.lineWidth=2,this.components&&(this.drawLine(o,s,r,s,this.componentColor,!0),this.drawLine(this.componentsAtOrigin?o:r,s,this.componentsAtOrigin?o:r,a,this.componentColor,!0));var h=Xt(this.drawLine(o,s,r,a,this.color,!1),2),u=(h[0],h[1]);""!=this.label&&(this.font.toCtx(n),n.fillText(this.label,r+10*Math.cos(u),a+10*Math.sin(u))),n.lineWidth=l}}},{key:"setMag",value:function(t,e){this.x=t*q(e,this.angleStyle),this.y=t*V(e,this.angleStyle)}},{key:"set",value:function(t,e){J(t)?(this.x=t.x||0,this.y=t.y||0):(this.x=t||0,this.y=e||0)}},{key:"add",value:function(t,e){J(t)?(this.x+=t.x||0,this.y+=t.y||0):(this.x+=t||0,this.y+=e||0)}},{key:"sub",value:function(t,e){J(t)?(this.x-=t.x||0,this.y-=t.y||0):(this.x-=t||0,this.y-=e||0)}},{key:"mult",value:function(t,e){J(t)?(this.x*=t.x||0,this.y+=t.y||0):void 0===e?(this.x*=t||0,this.y*=t||0):(this.x*=t||0,this.y*=e||0)}},{key:"print",value:function(){return"x: ".concat(this.x," y: ").concat(this.y)}},{key:"dot",value:function(t,e){return J(t)?this.dot(t.x,t.y):this.x*t+this.y*e}},{key:"mag",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"angle",value:function(){return this.angleStyle===l.DEG?Math.atan2(this.y,this.x)*c:Math.atan2(this.y,this.x)}},{key:"standardAngle",value:function(){var t=this.angle();return t<0?t+360:t}},{key:"magSquared",value:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)}}])&&Wt(i.prototype,n),o&&Wt(i,o),e}(yt);function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){function e(t,i){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=Jt(e).call(this))||"object"!==Vt(r)&&"function"!=typeof r?Qt(o):r).isDraggable=!0,n.topmostOnDrag=!0,n.r=void 0===t?1:t,n.lowerLabel="",n.upperLabel="",n.gradient=!0,ot(Qt(n),i),n}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(e,t),i=e,o=[{key:"getChargeColor",value:function(t){return t>0?Y.RED:t<0?Y.BLUE:Y.GRAY}},{key:"getChargeSign",value:function(t){return t>0?"+":t<0?"-":"0"}}],(n=[{key:"isMouseOver",value:function(){return tt(this.world.mouse.rx,this.world.mouse.ry,this.position.x,this.position.y)<Math.pow(this.r,2)}},{key:"draw",value:function(){if(0!==this.r){var t=this.world,e=t.scaleX,i=t.scaleY,n=t.ctx,o=this.color,r=this.position.x*e.toPx,s=this.position.y*i.toPx,a=this.r*e.toPx;if(this.gradient&&((o=n.createRadialGradient(r,s,0,r,s,a)).addColorStop(0,"white"),o.addColorStop(1,this.color)),n.fillStyle=o,n.beginPath(),n.arc(r,s,a,0,g),n.fill(),n.closePath(),""!==this.upperLabel||""!==this.lowerLabel){this.font.toCtx(n);var l=""!==this.upperLabel&&""!==this.lowerLabel?7:0;""!==this.upperLabel&&n.fillText(this.upperLabel,r,s-l),""!==this.lowerLabel&&n.fillText(this.lowerLabel,r,s+l)}}}}])&&Zt(i.prototype,n),o&&Zt(i,o),e}(yt);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ae=function(t){function e(t,i){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==ie(e)&&"function"!=typeof e?re(t):e}(this,oe(e).call(this))).width=0,n.height=0,n.isDraggable=!0,n.img=new Image,n.img.src=t,n.loaded=!1,n.pivot={x:.5,y:.5};var o=re(n);return n.img.onload=function(){o.loaded=!0},ot(re(n),i),n}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(e,t),i=e,(n=[{key:"isMouseOver",value:function(){return it(this.world.mouse.rx,this.world.mouse.ry,this.position.x,this.position.y,this.width/2,this.height/2)}},{key:"isLoaded",value:function(){return this.loaded&&isFinite(this.img.width)&&0!=this.img.width}},{key:"draw",value:function(){var t=this.world,e=t.scaleX,i=t.scaleY,n=t.ctx,o=Math.floor(this.img.width*this.scale),r=Math.floor(this.img.height*this.scale),s=this.position.x*e.toPx,a=this.position.y*i.toPx;this.width=o*e.toUnits,this.height=r*i.toUnits,this.loaded&&this.display&&(0!==this.rotation?(n.save(),n.translate(s,a),n.rotate(this.rotation),n.drawImage(this.img,-o*this.pivot.x,-r*this.pivot.y,o,r),n.restore()):n.drawImage(this.img,s-o*this.pivot.x,a-r*this.pivot.y,o,r))}}])&&ne(i.prototype,n),o&&ne(i,o),e}(yt);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var de=function(t){function e(t,i){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(n=!(r=ue(e).call(this))||"object"!==le(r)&&"function"!=typeof r?ce(o):r).shapeStyle=a.NONE,n.fillColor=G.GREEN.BACKGROUND,n.strokeColor=G.GREEN.BORDER,n.angleStyle=l.DEG,n.shapeMode=a.NONE,n.prevPosition={x:0,y:0},n.onDraw=Z(t)?t:void 0,n.renderer=new dt({enabled:!1}),ot(ce(n),i),n}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,t),i=e,(n=[{key:"selectCtx",value:function(){return this.renderer.enabled?this.renderer.ctx:this.world.ctx}},{key:"begin",value:function(t){var e=this.selectCtx();this.shapeStyle=void 0!==t?t:a.NONE,e.beginPath()}},{key:"end",value:function(){var t=this.selectCtx();void 0!==this.fillColor&&(t.fillStyle=this.fillColor,t.fill()),void 0!==this.strokeColor&&(t.strokeStyle=this.strokeColor,t.stroke()),t.closePath()}},{key:"draw",value:function(){Z(this.onDraw)&&(this.renderer.enabled?this.renderer.rendered?this.renderer.draw():(this.renderer.begin(),this.onDraw(),this.renderer.end(),this.renderer.draw()):(this.save(),this.onDraw(),this.restore()))}},{key:"moveTo",value:function(t,e){var i=this.selectCtx(),n=this.world,o=n.scaleX,r=n.scaleY;this.prevPosition.x=t*o.toPx,this.prevPosition.y=e*r.toPx,i.moveTo(this.prevPosition.x,this.prevPosition.y)}},{key:"lineTo",value:function(t,e){var i=this.selectCtx(),n=this.world,o=n.scaleX,r=n.scaleY;this.shapeStyle===a.ACCOMULATIVE?(this.prevPosition.x+=t*o.toPx,this.prevPosition.y+=e*r.toPx,i.lineTo(this.prevPosition.x,this.prevPosition.y)):i.lineTo(t*o.toPx,e*r.toPx)}},{key:"fill",value:function(t){this.fillColor=t}},{key:"noFill",value:function(){this.fillColor=void 0}},{key:"stroke",value:function(t){this.strokeColor=t}},{key:"noStroke",value:function(){this.strokeColor=void 0}},{key:"save",value:function(){this.selectCtx().save()}},{key:"restore",value:function(){this.selectCtx().restore()}},{key:"strokeWeight",value:function(t){this.selectCtx().lineWidth=t}},{key:"lineDash",value:function(t){this.selectCtx().setLineDash([t])}},{key:"rotate",value:function(t){this.selectCtx().rotate(-et(t,this.angleStyle))}},{key:"angleStyle",value:function(t){this.angleStyle=t}},{key:"translate",value:function(t,e){var i=this.selectCtx(),n=this.world,o=n.scaleX,r=n.scaleY;i.translate(t*o.toPx,e*r.toPx)}},{key:"triangle",value:function(t,e,i,n,o,r){var s=this.selectCtx(),a=this.world,l=a.scaleX,h=a.scaleY;this.begin(),s.moveTo(t*l.toPx,e*h.toPx),s.lineTo(i*l.toPx,n*h.toPx),s.lineTo(o*l.toPx,r*h.toPx),s.lineTo(t*l.toPx,e*h.toPx),this.end()}},{key:"vectorFromMag",value:function(t,e,i,n,o,r){this.fill(o),this.stroke(o);var s=t+i*q(n,this.angleStyle),a=e+i*V(n,this.angleStyle);return this.vector(t,e,s,a,r),[s,a]}},{key:"vector",value:function(t,e,i,n,o){var r=this.selectCtx(),s=this.world,a=s.scaleX,l=s.scaleY,h=t*a.toPx,u=i*a.toPx,c=e*l.toPx,f=n*l.toPx,d=.2*a.toPx,p=d*S,y=Math.atan2(f-c,u-h),b=r.lineWidth;this.begin(),this.strokeWeight(2),o&&this.lineDash(5),r.moveTo(h,c),r.lineTo(u,f),this.end(),o&&this.lineDash(1),this.begin(),0!==y&&(this.save(),r.translate(u,f),r.rotate(y),u=0,f=0),r.moveTo(u-p/2,f+d/2),r.lineTo(u-p/2,f-d/2),r.lineTo(u+p/2,f),r.lineTo(u-p/2,f+d/2),this.end(),this.strokeWeight(b),0!==y&&this.restore()}},{key:"equilateralTriangle",value:function(t,e,i,n){var o=this.selectCtx(),r=this.world,s=r.scaleX,a=r.scaleY,l=i*s.toPx,h=l*S,u=t*s.toPx,c=e*a.toPx;this.begin(),void 0!==n&&0!==n&&(this.save(),o.translate(u,c),this.rotate(n),u=0,c=0),o.moveTo(u-h/2,c+l/2),o.lineTo(u-h/2,c-l/2),o.lineTo(u+h/2,c),o.lineTo(u-h/2,c+l/2),this.end(),void 0!==n&&0!==n&&this.restore()}},{key:"rect",value:function(t,e,i,n){var o=this.selectCtx(),r=this.world,s=r.scaleX,a=r.scaleY;this.begin(),o.rect(t*s.toPx,e*a.toPx,i*s.toPx,n*a.toPx),this.end()}},{key:"line",value:function(t,e,i,n){var o=this.selectCtx(),r=this.world,s=r.scaleX,a=r.scaleY;this.begin(),o.moveTo(t*s.toPx,e*a.toPx),o.lineTo(i*s.toPx,n*a.toPx),this.end()}},{key:"arc",value:function(t,e,i,n,o){var r=this.selectCtx(),s=this.world,a=s.scaleX,l=s.scaleY;this.begin(),r.arc(t*a.toPx,e*l.toPx,i*a.toPx,et(n,this.angleStyle),et(o,this.angleStyle)),this.end()}},{key:"ellipse",value:function(t,e,i,n,o,r){var s=this.selectCtx(),a=this.world,l=a.scaleX,h=a.scaleY;this.begin(),s.ellipse(t*l.toPx,e*h.toPx,Math.abs(i*l.toPx),Math.abs(n*h.toPx),0,et(o,this.angleStyle),et(r,this.angleStyle)),this.end()}},{key:"text",value:function(t,e,i){var n=this.selectCtx(),o=this.world,r=o.scaleX,s=o.scaleY;this.begin(),this.font.toCtx(n),n.fillText(t,e*r.toPx,i*s.toPx),this.end()}},{key:"textWidth",value:function(t){var e=this.selectCtx(),i=this.world.scaleX;return e.measureText(t).width*i.toUnits}}])&&he(i.prototype,n),o&&he(i,o),e}(yt);function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function be(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ve(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xe(t,e){return(xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var we=function(t){function e(t){var i,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(i=!(o=ge(e).call(this))||"object"!==pe(o)&&"function"!=typeof o?me(n):o).points=[],i.displayUntil=-1,i.shade=!1,i.shadeColor="rgba(1, 1, 1, 0.2)",i.markers=[],i.limit=300,i.markerRadius=4,i.lineWidth=2,i.label="",i.drawInvisiblePoints=!1,i.style="line",i.binWidth=3,ot(me(i),t),i}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xe(t,e)}(e,t),i=e,(n=[{key:"setLabel",value:function(t){this.label=t}},{key:"addPoint",value:function(t,e){this.points.push([t,e]),this.points.length>this.limit&&this.limit>0&&this.points.shift()}},{key:"addMarker",value:function(t,e,i){var n={x:t,y:e,label:"",lower_label:"",color:this.color,top:!0};ot(n,i),this.markers.push(n)}},{key:"clear",value:function(){this.points=[],this.markers=[],this.displayUntil=-1}},{key:"draw",value:function(){var t=this.getPoints();this.shade&&this.drawShade(t),this.drawPlot(t),this.drawMarkers()}},{key:"maxIdx",value:function(){return this.displayUntil>=0&&this.displayUntil<this.points.length?this.displayUntil+1:this.points.length}},{key:"getPoints",value:function(){var t=this;return this.points.filter((function(e,i){return i<t.maxIdx()})).map((function(e){var i=e[0]*t.world.scaleX.toPx,n=e[1]*t.world.scaleY.toPx;return[].concat(be(e),[i,n,t.world.axis.isPointVisible(i,n)])}))}},{key:"drawShade",value:function(t){var e=this,i=this.world,n=(i.scaleX,i.scaleY,i.ctx);n.beginPath(),n.fillStyle=this.shadeColor;var o=!1;t.forEach((function(t,i){var r=ye(t,5),s=(r[0],r[1],r[2]),a=r[3],l=r[4];e.drawInvisiblePoints||l?0===i||o?(n.moveTo(s,0),n.lineTo(s,a),o=!1):(n.lineTo(s,a),i===e.maxIdx()-1&&n.lineTo(s,0)):(o=!0,n.lineTo(s,0))})),n.closePath(),n.fill()}},{key:"drawPlot",value:function(t){var e=this,i=this.world,n=(i.scaleX,i.scaleY,i.ctx),o=n.lineWidth;n.beginPath(),n.lineWidth=this.lineWidth,n.strokeStyle=this.color;var r=!1;t.forEach((function(t,i){var o=ye(t,5),s=(o[0],o[1],o[2]),a=o[3],l=o[4];"line"===e.style?e.drawInvisiblePoints||l?0===i||r?(n.moveTo(s,a),r=!1):n.lineTo(s,a):r=!0:(n.fillStyle=e.color,n.rect(s-e.binWidth/2,0,e.binWidth,a),n.fill())})),n.stroke(),n.closePath(),n.lineWidth=o}},{key:"drawMarkers",value:function(){var t=this,e=this.world,i=e.scaleX,n=e.scaleY,o=e.ctx;this.font.set({baseline:"middle"}),this.markers.forEach((function(e){var r=e.x*i.toPx,s=e.y*n.toPx;if(o.beginPath(),o.fillStyle=e.color,o.arc(r,s,t.markerRadius,0,g),o.fill(),o.closePath(),""!==e.label){var a=e.top?-1:1;t.font.toCtx(o),""!==e.lower_label?(o.fillText(e.label,r,s+(t.markerRadius+25)*a),o.fillText(e.lower_label,r,s+(t.markerRadius+10)*a)):o.fillText(e.label,r,s+(t.markerRadius+10)*a)}}))}}])&&ve(i.prototype,n),o&&ve(i,o),e}(yt);function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ee=function(t){function e(t,i,n,o){var r,s,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(r=!(a=Oe(e).call(this))||"object"!==ke(a)&&"function"!=typeof a?Se(s):a).box=t,r.width=i,r.height=n,r.text=[],r.font.set({align:"left",size:14,baseline:"top",color:Y.GRAY}),ot(Se(r),o),r}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(e,t),i=e,(n=[{key:"setText",value:function(t){this.text=t.split("\n")}},{key:"debug",value:function(){var t=this.box.world.ctx;t.beginPath(),t.strokeStyle=Y.RED,t.rect(0,0,this.width,this.height),t.stroke(),t.closePath()}},{key:"draw",value:function(){var t=this.box.world.ctx;t.beginPath(),this.font.toCtx(t);for(var e=0;e<this.text.length;e+=1)t.fillText(this.text[e],0,e*this.font.spacing*this.font.size);t.closePath()}}])&&Pe(i.prototype,n),o&&Pe(i,o),e}(yt);function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ae=function(t){function e(t,i,n,o){var r,s,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(r=!(a=Me(e).call(this))||"object"!==Te(a)&&"function"!=typeof a?_e(s):a).box=t,r.width=i,r.height=n,r.plots=[],r.legends_enabled=!1,r.padding={left:25,bottom:25,right:10,top:10},r.scaleX=new ht(20,1,""),r.scaleY=new ht(20,-1,""),r.title="",r.xlabel="x",r.ylabel="y",r.axisPosition=["left","bottom"],r.ctx=void 0,r.axis=new wt(r.width-r.padding.left-r.padding.right,r.height-r.padding.top-r.padding.bottom,{world:_e(r),color:Y.GRAY,subAxisColor:"#DDDDDD",textOffset:2,tickSize:4,tickSizeSmall:2,outsideNumbers:!1}),r.font.set({size:14,color:Y.GRAY,baseline:"top"}),r.axis.font.color=Y.GRAY,r.axis.renderer.enabled=!1,r.setAxisPosition(),ot(_e(r),o),r}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(e,t),i=e,(n=[{key:"setAxisPosition",value:function(t,e){void 0!==t&&(this.axisPosition[0]=t),void 0!==e&&(this.axisPosition[1]=e);var i=0,n=this.axis.height;"center"===this.axisPosition[0]?i=this.axis.width/2:"right"===this.axisPosition[0]&&(i=this.axis.width),"top"===this.axisPosition[1]?n=0:"center"===this.axisPosition[1]&&(n=this.axis.height/2),this.axis.setPosition(i,n)}},{key:"setAxisDimensions",value:function(){this.axis.width=this.width-this.padding.left-this.padding.right,this.axis.height=this.height-this.padding.top-this.padding.bottom,this.setAxisPosition()}},{key:"setDimensions",value:function(t,e){this.width=t,this.height=e,this.setAxisDimensions()}},{key:"legends",value:function(t){this.legends_enabled=t,this.legends_enabled?this.padding.top=25:this.padding.top=10,this.setAxisDimensions()}},{key:"setPadding",value:function(t,e,i,n){this.padding.top=t,this.padding.right=e,this.padding.bottom=i,this.padding.left=n,this.axis.width=this.width-n-e,this.axis.height=this.height-t-i,this.setAxisDimensions()}},{key:"addPlot",value:function(t){var e=new we(t);return e.setWorld(this),this.plots.push(e),e}},{key:"setLabels",value:function(t,e,i){this.title=t,this.xlabel=e,this.ylabel=i}},{key:"debug",value:function(){var t=this.box.world.ctx;t.beginPath(),t.fillStyle=G.GREEN.BACKGROUND,t.rect(0,0,this.width-this.padding.right,this.padding.top),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=G.PURPLE.BACKGROUND,t.rect(0,this.height-this.padding.bottom,this.width,this.padding.bottom),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=G.YELLOW.BACKGROUND,t.rect(0,0,this.padding.left,this.height-this.padding.bottom),t.fill(),t.closePath(),t.beginPath(),t.arc(this.axis.position.x+this.padding.left,this.axis.position.y+this.padding.top,4,0,g),t.stroke(),t.closePath(),t.beginPath(),t.lineWidth=1,t.strokeStyle=Y.RED,t.rect(0,0,this.width,this.height),t.rect(this.padding.left,this.padding.top,this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom),t.stroke(),t.closePath()}},{key:"draw",value:function(){var t=this,e=this.box.world.ctx;if(this.legends_enabled){var i=this.plots.filter((function(t){return t.display&&""!==t.label})),n=this.width/i.length;i.forEach((function(i,o){e.beginPath(),t.font.set({size:12,baseline:"middle"}),t.font.toCtx(e);var r=Math.floor(n/2+n*o),s=Math.floor(.3*t.padding.top);e.fillText(i.label,r,s),e.fillStyle=i.color,e.arc(Math.floor(r-e.measureText(i.label).width/2-10),s,4,0,g),e.fill(),e.closePath()}))}""!==this.title&&(this.font.set({size:14}),this.font.toCtx(e),e.beginPath(),e.fillText(this.title,Math.floor(this.width/2),Math.floor(.2*this.padding.top))),this.font.set({size:12,baseline:"bottom"}),this.font.toCtx(e),e.fillText(this.xlabel,Math.floor(this.padding.left+this.axis.width/2),Math.floor(this.height)),e.save(),e.translate(Math.floor(0),Math.floor(this.padding.top+this.axis.height/2)),e.rotate(m),e.fillText(this.ylabel,0,0),e.restore(),e.closePath(),e.translate(this.axis.position.x+this.padding.left,this.axis.position.y+this.padding.top),this.ctx=e,this.axis.draw(),this.plots.forEach((function(t){t.display&&t.draw()}))}}])&&je(i.prototype,n),o&&je(i,o),e}(yt);function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ze(t,e){return(ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Be=function(t){function e(t,i,n,o){var r,s,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,(r=!(a=Le(e).call(this))||"object"!==De(a)&&"function"!=typeof a?Ie(s):a).box=t,r.width=i,r.height=n||14,r.labelWidth=75,r.name="",r.value="",r.units="",r.usePrefixes=!1,r.decPlaces=2,r.fixPlaces=!1,r.onClick=void 0,r.isDown=!1,r.font.set({align:"left",size:14,baseline:"middle",color:Y.GRAY}),ot(Ie(r),o),r}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ze(t,e)}(e,t),i=e,(n=[{key:"isMouseOver",value:function(){return it(this.box.world.mouse.x,this.box.world.mouse.y,this.box.position.x+this.box.padding.top+this.position.x+this.width/2,this.box.position.y+this.box.padding.left+this.position.y+this.height/2,this.width/2,this.height/2)}},{key:"set",value:function(t){var e=t;if(Q(e))this.value=e;else{var i=Math.abs(t),n=this.units;this.usePrefixes&&(i>1e32?e=h.INF:i>1e9?(e/=1e9,n="G".concat(this.units)):i>1e6?(e/=1e6,n="M".concat(this.units)):i>1e3&&(e/=1e3,n="k".concat(this.units))),this.value=nt(e,n,this.decPlaces,this.fixPlaces)}}},{key:"debug",value:function(){var t=this.box.world.ctx;t.beginPath(),t.strokeStyle=Y.BLUE,t.rect(0,0,this.width,this.height),t.moveTo(this.labelWidth,0),t.lineTo(this.labelWidth,this.height),t.stroke(),t.closePath()}},{key:"draw",value:function(){var t=this.box.world.ctx;t.beginPath(),this.font.toCtx(t),t.fillText(this.name,0,this.height/2),t.fillText(this.value,this.labelWidth,this.height/2),t.closePath(),this.box.world.mouse.down&&this.mouseOver?this.isDown=!0:!this.box.world.mouse.down&&this.isDown&&(this.isDown=!1,Z(this.onClick)&&this.onClick())}}])&&Ne(i.prototype,n),o&&Ne(i,o),e}(yt);function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var We=function(t){function e(t){var i,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(i=!(o=Ge(e).call(this))||"object"!==Fe(o)&&"function"!=typeof o?Ue(n):o).width=0,i.height=0,i.color=G.BLUE,i.mouseMoveStyle=s.BY_PX,i.isDraggable=!0,i.padding={top:10,right:10,bottom:10,left:10},i.debug=!1,i.title="",i.elements=[],i.font.set({weight:500,size:16,baseline:"top",align:"center",color:Y.GRAY}),ot(Ue(i),t),i}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}(e,t),i=e,(n=[{key:"addText",value:function(t,e,i){var n=new Ee(this,t,e,i);return this.elements.push(n),this.calculateDimensions(),n}},{key:"addLabel",value:function(t,e,i){var n=new Be(this,t,e,i);return this.elements.push(n),this.calculateDimensions(),n}},{key:"addGraph",value:function(t,e,i){var n=new Ae(this,t,e,i);return this.elements.push(n),this.calculateDimensions(),n}},{key:"setPadding",value:function(t,e,i,n){this.padding.top=t,this.padding.right=e,this.padding.bottom=i,this.padding.left=n,this.calculateDimensions()}},{key:"calculateDimensions",value:function(){this.width=0,this.height=0;for(var t=0;t<this.elements.length;t++){var e=this.padding.left+this.padding.right+this.elements[t].position.x+this.elements[t].width;this.width<e&&(this.width=Math.ceil(e));var i=this.padding.top+this.padding.bottom+this.elements[t].position.y+this.elements[t].height;this.height<i&&(this.height=Math.ceil(i))}}},{key:"isMouseOver",value:function(){return it(this.world.mouse.x,this.world.mouse.y,this.position.x+this.width/2,this.position.y+this.height/2,this.width/2,this.height/2)}},{key:"draw",value:function(){var t=this.world.ctx,e=this.position.x-this.world.axis.position.x,i=this.position.y-this.world.axis.position.y;t.beginPath(),t.lineWidth=3,t.fillStyle=this.color.BACKGROUND,t.strokeStyle=this.color.BORDER,t.rect(e,i,this.width,this.height),t.stroke(),t.fill(),t.closePath(),t.lineWidth=1,this.debug&&(t.beginPath(),t.strokeStyle=Y.RED,t.rect(e+this.padding.left,i+this.padding.top,this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom),t.stroke(),t.closePath()),""!==this.title&&(t.beginPath(),this.font.toCtx(t),t.fillText(this.title,e+this.width/2,i+this.padding.top),t.closePath());for(var n=0;n<this.elements.length;n++)t.save(),t.translate(e+this.padding.left+this.elements[n].position.x,i+this.padding.top+this.elements[n].position.y),this.debug&&Z(this.elements[n].debug)&&this.elements[n].debug(),this.elements[n].display&&this.elements[n].draw(t,this.display.debug),t.restore()}}])&&Ye(i.prototype,n),o&&Ye(i,o),e}(yt);function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qe(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Je=function(t){function e(t){var i,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(i=!(o=$e(e).call(this))||"object"!==Ke(o)&&"function"!=typeof o?Ve(n):o).constant=!1,i.plots=[],i.cursorRadius=4,i.closest={distance:1/0,px:0,py:0,label:"",color:""},i.color=G.GRAY,i.cursor=u.CROSS,i.isDraggable=!0,i.font.set({size:12,baseline:"middle",align:"center",color:Y.GRAY}),ot(Ve(i),t),i}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,t),i=e,(n=[{key:"add",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){e instanceof we&&t.plots.indexOf(e)<0&&t.plots.push(e)}))}},{key:"remove",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i.forEach((function(e){t.plots.indexOf(e)&&t.plots.splice(t.plots.indexOf(e),1)}))}},{key:"isMouseOverPlot",value:function(t){var e=t.world instanceof Ae,i=(e?t.world.box.world:t.world).mouse,n=t.world.axis.position.x,o=t.world.axis.position.y;e&&(n+=t.world.box.position.x+t.world.box.padding.left+t.world.position.x+t.world.padding.left,o+=t.world.box.position.y+t.world.box.padding.top+t.world.position.y+t.world.padding.top);var r={distance:1/0,px:0,py:0,label:"",color:""};return t.getPoints().forEach((function(s){var a=He(s,5),l=a[0],h=a[1],u=a[2],c=a[3];if(a[4]){var f=tt(i.x,i.y,u+n,c+o);f<r.distance&&f<125&&(r.px=u,r.py=c,e&&(r.px+=n-t.world.box.world.axis.position.x,r.py+=o-t.world.box.world.axis.position.y),r.label="(".concat(K(l,2),", ").concat(K(h,2),")"),r.distance=f,r.color=t.color)}})),r}},{key:"isMouseOver",value:function(){var t=this,e=this.plots.filter((function(t){return t.display})).map((function(e){return t.isMouseOverPlot(e)})).sort((function(t,e){return t.distance-e.distance}));return e.length&&e[0].distance<1/0?(this.closest=e[0],!0):(this.closest.distance=1/0,!1)}},{key:"draw",value:function(){var t=this.world.ctx;if(this.constant&&this.isMouseOver(),this.closest.distance<1/0){t.save(),t.translate(this.closest.px,this.closest.py),this.font.toCtx(t);var e=t.measureText(this.closest.label).width+10,i=this.font.size+10;t.beginPath(),t.fillStyle=this.closest.color,t.arc(0,0,this.cursorRadius,0,g),t.fill(),t.closePath(),t.beginPath(),t.fillStyle=this.color.BACKGROUND,t.strokeStyle=this.color.BORDER,t.rect(-e/2,-i/2-25,e,i),t.stroke(),t.fill(),t.closePath(),t.beginPath(),this.font.toCtx(t),t.fillText(this.closest.label,0,-25),t.fill(),t.closePath(),t.restore()}}}])&&qe(i.prototype,n),o&&qe(i,o),e}(yt);window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;var Qe=n;Qe.Box=We,Qe.Ball=ee,Qe.Box=We,Qe.Picture=ae,Qe.Plot=we,Qe.Shape=de,Qe.Slider=Gt,Qe.Vector=$t,Qe.World=Ot,Qe.utils=o,Qe.dom=r,Qe.DataCursor=Je,window.p$=Qe}]);